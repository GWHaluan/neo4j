Main Header
===========
:Author:    Richard Sill
:Email:     <rschroed2009@gmx.de>
:Date       21.10.2023
:Revision:  1.0

A text-based adventure in Neo4j
-------------------------------



About the project
~~~~~~~~~~~~~~~~~

I drew inspiration from link:https://neo4j.com/blog/vampire-express-graph-database-choose-your-own-adventure/[Vampire Express: Graphing a Classic â€™80s Choose Your Own Adventure Story] by Joe Depeau, one of the suggestions from the challenge text.

some interesting aspects about graph representations of such text-based adventures in link:https://www.atlasobscura.com/articles/cyoa-choose-your-own-adventure-maps[These Maps Reveal the Hidden Structures of 'Choose Your Own Adventure' Books]

link:https://www.polygon.com/2014/9/8/6123049/alien-aliens-avp-terror-aboard-the-speedwell[praise]

link:https://jgwaltneiv.itch.io/the-terror-aboard-the-speedwell[get it here]

Preparing the data model
~~~~~~~~~~~~~~~~~~~~~~~~

Getting hold of usable source data
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Download +The Terror Aboard The Speedwell 1.2.zip+.
Luckily, the file +The Terror Aboard The Speedwell 1.2.html+ contains a list of +div+-elements with all text snippets for the story.

I used Python to parse the HTML and to convert the data to CSV.
Then I used Neo4j's CSV upload to populate my project with both node and edge data from the HTML file.

See the link:divparser.py[Python script] for reference.

Populating the Neo4j graph
^^^^^^^^^^^^^^^^^^^^^^^^^^

[source]
----
LOAD CSV WITH HEADERS FROM "https://raw.githubusercontent.com/GWHaluan/neo4j/main/nodes.csv" AS row MERGE (c:Storynode {id: row.incoming, text: row.text});
----


[source]
----
LOAD CSV WITH HEADERS FROM "https://raw.githubusercontent.com/GWHaluan/neo4j/main/edges.csv" AS row MATCH (e:Storynode {id: row.from})
MATCH (c:Storynode {id: row.to}) MERGE (e)-[rel1:CONNECTS_TO]->(c) ON CREATE SET rel1.choice = row.to;
----


[source]
----
MATCH ()-[r:CONNECTS_TO]->()
DELETE r
----

[source]
----
MATCH (n:Storynode)
DELETE n
----

Defining special nodes
^^^^^^^^^^^^^^^^^^^^^^

Sample text.

Querying the adventure graph
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Q: Are there any circles in the story?
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Courtesy of Joe Depeau.

Q: Are there unreachable story steps?
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Sample text.

Q: Which paths finish the story? Survival or fatality?
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Sample text.
